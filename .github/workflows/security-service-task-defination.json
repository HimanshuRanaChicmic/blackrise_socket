{
  "family": "tbr-security-service-stage",
  "containerDefinitions": [
    {
      "name": "security-service",
      "image": "625073454551.dkr.ecr.eu-west-2.amazonaws.com/tbr-security-service-stage:latest",
      "cpu": 0,
      "portMappings": [
        {
          "name": "security-service",
          "containerPort": 8080,
          "hostPort": 8080,
          "protocol": "tcp"
        }
      ],
      "essential": true,
      "environment": [],
      "mountPoints": [],
      "volumesFrom": [],
      "secrets": [
        {
          "name": "DB_HOST",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:DB_HOST:AWSCURRENT:"
        },
        {
          "name": "DB_NAME",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:DB_NAME:AWSCURRENT:"
        },
        {
          "name": "DB_USERNAME",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:DB_USERNAME:AWSCURRENT:"
        },
        {
          "name": "DB_PASSWORD",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:DB_PASSWORD:AWSCURRENT:"
        },
        {
          "name": "EMAIL_PASSWORD",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:EMAIL_PASSWORD:AWSCURRENT:"
        },
        {
          "name": "EMAIL_HOST",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:EMAIL_HOST:AWSCURRENT:"
        },
        {
          "name": "EMAIL_PORT",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:EMAIL_PORT:AWSCURRENT:"
        },
        {
          "name": "LINKEDIN_CLIENT_ID",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:LINKEDIN_CLIENT_ID:AWSCURRENT:"
        },
        {
          "name": "LINKEDIN_CLIENT_SECRET",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:LINKEDIN_CLIENT_SECRET:AWSCURRENT:"
        },
        {
          "name": "LINKEDIN_REDIRECT_URI",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:LINKEDIN_REDIRECT_URI:AWSCURRENT:"
        },
        {
          "name": "JWT_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:JWT_KEY:AWSCURRENT:"
        },
        {
          "name": "JWT_LINKEDIN_CLIENT_ID",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:JWT_LINKEDIN_CLIENT_ID:AWSCURRENT:"
        },
        {
          "name": "JWT_LINKEDIN_CLIENT_SECRET",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:JWT_LINKEDIN_CLIENT_SECRET:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_EMAIL_CONFIRMATION",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_EMAIL_CONFIRMATION:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_RESET_PASSWORD",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_RESET_PASSWORD:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_LOGIN",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_LOGIN:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_LOGIN_REDIRECT",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_LOGIN_REDIRECT:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_SENDER_URL",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_SENDER_URL:AWSCURRENT:"
        },
        {
          "name": "CLIENT_URL_PROFILE_URL",
          "valueFrom": "arn:aws:secretsmanager:eu-west-2:625073454551:secret:tbr-security-service-stage-f5dhu0:CLIENT_URL_PROFILE_URL:AWSCURRENT:"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/tbr-security-service-stage",
          "awslogs-region": "eu-west-2",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "systemControls": []
    },
    {
      "name": "security-service-xray-daemon",
      "image": "amazon/aws-xray-daemon",
      "cpu": 32,
      "memoryReservation": 256,
      "portMappings": [
        {
          "containerPort": 2000,
          "hostPort": 2000,
          "protocol": "udp"
        }
      ],
      "essential": false,
      "environment": [],
      "mountPoints": [],
      "volumesFrom": [],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/tbr-security-service-stage",
          "awslogs-region": "eu-west-2",
          "awslogs-stream-prefix": "xray"
        }
      },
      "systemControls": []
    }
  ],
  "taskRoleArn": "arn:aws:iam::625073454551:role/tbr-ecs-task-role-stage",
  "executionRoleArn": "arn:aws:iam::625073454551:role/tbr-ecs-task-execution-role-stage",
  "networkMode": "awsvpc",
  "volumes": [],
  "placementConstraints": [],
  "requiresCompatibilities": [
    "FARGATE"
  ],
  "cpu": "256",
  "memory": "512",
  "tags": [
    {
      "key": "Environment",
      "value": "stage"
    }
  ]
}
